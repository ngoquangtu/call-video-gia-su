<!DOCTYPE html>
<html>
<head>
  <title>WebRTC with Firebase</title>
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js';
    import { getFirestore } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js';
    
    const firebaseConfig = {
      apiKey: '<%= process.env.FIREBASE_API_KEY %>',
      authDomain: '<%= process.env.FIREBASE_AUTH_DOMAIN %>',
      databaseURL: '<%= process.env.FIREBASE_DATABASE_URL %>',
      projectId: '<%= process.env.FIREBASE_PROJECT_ID %>',
      storageBucket: '<%= process.env.FIREBASE_STORAGE_BUCKET %>',
      messagingSenderId: '<%= process.env.FIREBASE_MESSAGING_SENDER_ID %>',
      appId: '<%= process.env.FIREBASE_APP_ID %>'
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const firestore = getFirestore(app);

    // Attach Firestore to window for access in main.js
    window.firestore = firestore;
  </script>
</head>
<body>
  <button id="webcamButton">Start webcam</button>
  <video id="webcamVideo" autoplay playsinline></video>
  <input id="callInput" />
  <button id="callButton" disabled>Call</button>
  <button id="answerButton" disabled>Answer</button>
  <video id="remoteVideo" autoplay playsinline></video>
  <button id="hangupButton" disabled>Hang up</button>

  <script type="module" src="main.js"></script>
</body>
</html>
